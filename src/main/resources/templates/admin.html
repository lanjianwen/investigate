<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.css" th:href="@{bootstrap/css/bootstrap.css}">
    <link rel="stylesheet" href="../static/css/admin.css" th:href="@{css/admin.css}">

    <script src="../static/js/jquery-3.3.1.js" th:src="@{js/jquery-3.3.1.js}"></script>
    <script src="../static/bootstrap/js/bootstrap.js" th:src="@{bootstrap/js/bootstrap.js}"></script>

</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">首页</a>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-pills nav-stacked">
                <li class="active"><a href="#tab1" data-toggle="tab">教职工信息</a></li>
                <li><a href="#tab2" data-toggle="tab">学生信息</a></li>
            </ul>
        </div>

        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th class="text-center">片区</th>
                            <th class="text-center">部门</th>
                            <th class="text-center">姓名</th>
                            <th class="text-center">电话</th>
                            <th class="text-center">性别</th>
                            <th class="text-center">住址</th>
                            <th class="text-center">是/否校内人员</th>
                            <th class="text-center">目前健康状况</th>
                        </tr>
                        </thead>
                        <tbody id="teacher">

                        </tbody>
                    </table>
                </div>
                <div class="tab-pane" id="tab2">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th class="text-center">片区</th>
                            <th class="text-center">专业班级</th>
                            <th class="text-center">姓名</th>
                            <th class="text-center">电话</th>
                            <th class="text-center">性别</th>
                            <th class="text-center">住址</th>
                            <th class="text-center">是/否校内人员</th>
                            <th class="text-center">目前健康状况</th>
                        </tr>
                        </thead>
                        <tbody id="student">

                        </tbody>
                    </table>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>

</body>

<script>
    $(function () {
        $.ajax({
            type:"get",// get或者post
            url:"findAll",// 请求的url地址
            dataType:"json",//json写了jq会帮我们转换成数组或者对象 他已经用JSON.parse弄好了
            beforeSend:function(){
                // 发送之前就会进入这个函数
                // return false 这个ajax就停止了不会发 如果没有return false 就会继续
            },
            success:function(data){ // 成功拿到结果放到这个函数 data就是拿到的结果
                var teacher = '';
                var student = '';
                var school = "";
                for (var i = 0; i < data.length; i++) {
                    if (data[i].isSchool == 1){
                        school = "是";
                    }
                    else {
                        school = "否";
                    }
                    if (data[i].role == "teacher"){
                        teacher +='<tr>\n' +
                            '            <td class="text-center">'+data[i].area+'</td>\n' +
                            '            <td class="text-center">'+data[i].department+'</td>\n' +
                            '            <td class="text-center">'+data[i].name+'</td>\n' +
                            '            <td class="text-center">'+data[i].phone+'</td>\n' +
                            '            <td class="text-center">'+data[i].sex+'</td>\n' +
                            '            <td class="text-center">'+data[i].address+'</td>\n' +
                            '            <td class="text-center">'+school+'</td>\n' +
                            '            <td class="text-center"><a href="list?userId='+data[i].id+'">查看详情</a></td>\n' +
                            '        </tr>';
                    }
                    else if (data[i].role == "student") {
                        student +='<tr>\n' +
                            '            <td class="text-center">'+data[i].area+'</td>\n' +
                            '            <td class="text-center">'+data[i].department+'</td>\n' +
                            '            <td class="text-center">'+data[i].name+'</td>\n' +
                            '            <td class="text-center">'+data[i].phone+'</td>\n' +
                            '            <td class="text-center">'+data[i].sex+'</td>\n' +
                            '            <td class="text-center">'+data[i].address+'</td>\n' +
                            '            <td class="text-center">'+school+'</td>\n' +
                            '            <td class="text-center"><a href="list?userId='+data[i].id+'">查看详情</a></td>\n' +
                            '        </tr>';
                    }
                }
                $("#teacher").html(teacher);
                $("#student").html(student);

            }
        })
    })
</script>

</html>